<apex:page sidebar="false" showHeader="false" standardStylesheets="true" id="thePage" standardController="DRDW_ND_Budget_Detail__c" extensions="DRDW_CreateNDBudgetDetail" >
<head>
        <title>Create Non-Discretionary Budget Detail</title>
    </head>  
    
    <body>
      
        <div class='df_drdw content'>
            <!--Using QFORs Index component for the Top Header -->
			<c:DRDW_QFOR_Styles/>
            <c:DRDW_IndexNew />
            <div class="df_drdw-createstudy vertical-compress">
                
                <header>
                    
                    <div class="container">
                        <div class="row">
                            <div class="col-xs-12">
                                <apex:outputpanel rendered="{!IF($CurrentPage.parameters.id == NULL,true,false)}">
                                    <h1>Create Non-Discretionary Budget Master Detail</h1>
                                    <p></p>                                </apex:outputpanel>  
                                <apex:outputpanel rendered="{!IF($CurrentPage.parameters.id!= NULL,true,false)}">
                                    <h1>Non-Discretionary Budget Detail for {!obmCat.Year__c}</h1>
                                    <p></p>                                </apex:outputpanel>                                 
                            </div>
                        </div>
                    </div>
                    
                </header>
                <main class="container">
                 
                       <apex:outputpanel rendered="{!IF(OR($CurrentPage.parameters.id == NULL,AND($CurrentPage.parameters.id != NULL,$CurrentPage.parameters.isEdit=='true')),true,false)}">
                       
                       <apex:form Styleclass="create-study-form accordion">
                        <apex:pageMessages />
                        <!---------------------------------------------------------Buttons Section---------------------------------------------------------------------------------------------->
                            <section class="row submit">
                                <div class="col-xs-12">
                                <input type="button" class="btn button submit-form-button" value="Save"/>
                                    <apex:actionFunction Name="doSubmit" action="{!save}"/>
                                  <!--  <apex:commandButton styleClass="btn button" value="Save" action="{!save}" /> -->
                                      <apex:outputLink styleClass="btn button" value="{!IF($CurrentPage.parameters.id == NULL,'/apex/DRDW_CreateNDBudgetMaster','/apex/DRDW_CreateNDBudgetDetail?id='+currentRecordID+'&isEdit=false')}">Cancel</apex:outputLink>
                                </div>
                            </section>
                            <!---------------------------------------------------------Buttons Section---------------------------------------------------------------------------------------------->
                       
                       <section class="row">
                       
                                <div class="col-xs-12">
                                        <h2 class="accordion-parent">Non-Discretionary Budget Details
                                        <span class="icon-large-caret pull-right down"></span></h2>
                                        <fieldset class="accordion-child">
                                        
                                                <div class="row">
                                                        <div class="col-xs-2 label-wrapper">
                                                            <label>{!$ObjectType.DRDW_ND_Budget_Detail__c.Fields.Year__c.Label}</label>
                                                            <apex:outputpanel rendered="{!IF($ObjectType.DRDW_ND_Budget_Detail__c.Fields.Year__c.inlinehelptext != NULL,true,false)}">
                                                                <div class="helpOrb tooltip">
                                                                    <span>{!$ObjectType.DRDW_ND_Budget_Detail__c.Fields.Year__c.inlinehelptext}</span>
                                                                </div>          
                                                            </apex:outputpanel>      
                                                        </div>
                                                        <div class="col-xs-4 field-wrapper">
                                                        <apex:outputPanel rendered="{!IF($CurrentPage.parameters.id == NULL,true,false)}">
                                                            <apex:inputField value="{!obmCat.Year__c}" ></apex:inputField>            
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!IF($CurrentPage.parameters.id != NULL,true,false)}">
                                                            <apex:outputField value="{!obmCat.Year__c}" ></apex:outputField>            
                                                        </apex:outputPanel> 
                                                        </div>
                                                        
                                                </div>                                              
                                                
                                                
                                        </fieldset>
                                </div>
                       
                       </section>
                       <section class="row">
                        
                                                <div class="col-xs-12">
                                                    <h2 class="accordion-parent">Related Non-Discretionary Budget Detail Category<span class="icon-large-caret pull-right down"></span></h2>
                                                    <fieldset class="accordion-child">
                                                         <div class="related-list"> 
                                                         <!-- <apex:commandButton styleClass="btn btn button btn-override" style="background:none;background-color:white;color:black" value="Create New Non-Discretionary Budget Category" action="{!AddCategory}"/> -->
                                                            <apex:pageBlock >
                                                                        <apex:pageBlockTable value="{!ldCategory}" var="item">
                                                                            <apex:column >
                                                                                <apex:facet name="header">Record ID</apex:facet>
                                                                                <apex:commandlink styleclass="remove-custom-data-row" value="{!item.Name}" action="{!CategoryLink}">
                                                                                    <apex:param name="LinkID" value="{!item.Id}" assignTo="{!LinkID}" />
                                                                                </apex:commandlink>
                                                                            </apex:column>
                                                                            <apex:column value="{!item.Category__c}"/>
                                                                            <apex:column value="{!item.Q1__c}"/>
                                                                            <apex:column value="{!item.Q2__c}"/>
                                                                            <apex:column value="{!item.Q3__c}"/>
                                                                            <apex:column value="{!item.Q4__c}"/>
                                                                            <apex:column value="{!item.Non_Discretionary_Year_Total__c}"/>
                                                                        </apex:pageBlockTable>
                                                            </apex:pageBlock> 
                                                        </div>
                                                    </fieldset>
                                                </div>
                        </section>
                       
                       
                        <!---------------------------------------------------------Buttons Section---------------------------------------------------------------------------------------------->
                            <section class="row submit with-top-margin">
                                <div class="col-xs-12">
                                <input type="button" class="btn button submit-form-button" value="Save"/>
                                    <apex:actionFunction Name="doSubmit" action="{!save}"/>
                                  <!-- <apex:commandButton styleClass="btn button" value="Save" action="{!save}" />  -->
                                     <apex:outputLink styleClass="btn button" value="{!IF($CurrentPage.parameters.id == NULL,'/apex/DRDW_PlanResearch','/apex/DRDW_CreateNDBudgetMaster?id='+currentRecordID+'&isEdit=false')}">Cancel</apex:outputLink>
                                </div>
                            </section>
                            <!---------------------------------------------------------Buttons Section---------------------------------------------------------------------------------------------->
                        
                       
                       </apex:form>
                       
                       </apex:outputpanel>
                        
                        <apex:outputpanel rendered="{!IF(AND($CurrentPage.parameters.id != NULL,OR($CurrentPage.parameters.isEdit=='false',$CurrentPage.parameters.isEdit==NULL)),true,false)}">
                        <apex:form Styleclass="create-study-form accordion">
                         <!---------------------------------------------------------Buttons Section---------------------------------------------------------------------------------------------->
                            <section class="row submit">
                                <div class="col-xs-12">
                                <apex:outputPanel rendered="{!isAccess}">
                              <!--          <apex:commandButton styleClass="btn button" value="Edit" action="{!Edit}" /> -->
                                </apex:outputPanel>
                                <apex:outputPanel rendered="{!if(OR(isAdmin,isFin),true,false)}">                                   
                              <!--       <a class="btn button" onClick="df_drdw.createStudy.showDeleteConfirmModal();">Delete</a> -->
                                    </apex:outputPanel>
                                </div>
                            </section>
                            <!---------------------------------------------------------Buttons Section---------------------------------------------------------------------------------------------->
                         <section class="row">
                                <div class="col-xs-12">
                                    <h2 class="accordion-parent">Non-Discretionary Budget Details
                                        <span class="icon-large-caret pull-right down"></span></h2>
                                    <fieldset class="accordion-child">
                                                 <div class="row">
                                                        <div class="col-xs-2 label-wrapper">
                                                            <label>{!$ObjectType.DRDW_ND_Budget_Detail__c.Fields.Year__c.Label}</label>
                                                            <apex:outputpanel rendered="{!IF($ObjectType.DRDW_ND_Budget_Detail__c.Fields.Year__c.inlinehelptext != NULL,true,false)}">
                                                                <div class="helpOrb tooltip">
                                                                    <span>{!$ObjectType.DRDW_ND_Budget_Detail__c.Fields.Year__c.inlinehelptext}</span>
                                                                </div>          
                                                            </apex:outputpanel>      
                                                        </div>
                                                        <div class="col-xs-4 field-wrapper">
                                                            <apex:outputField value="{!obmCat.Year__c}" ></apex:outputField>                                          
                                                        </div>
                                                        <div class="col-xs-2 label-wrapper">
                                                            <label>{!$ObjectType.DRDW_ND_Budget_Detail__c.Fields.DRDW_Cost_Center__c.Label}</label>
                                                            <apex:outputpanel rendered="{!IF($ObjectType.DRDW_ND_Budget_Detail__c.Fields.DRDW_Cost_Center__c.inlinehelptext != NULL,true,false)}">
                                                                <div class="helpOrb tooltip">
                                                                    <span>{!$ObjectType.DRDW_ND_Budget_Detail__c.Fields.DRDW_Cost_Center__c.inlinehelptext}</span>
                                                                </div>          
                                                            </apex:outputpanel>      
                                                        </div>
                                                        <div class="col-xs-4 field-wrapper lookupreadonly" >
                                                            <apex:outputText value="{!costcentername}" ></apex:outputText>                                          
                                                        </div>
                                                      
                                                </div>                                              
                                               
                                    </fieldset>
                                </div>
                       
                       </section>
                       <section class="row">
                        
                                                <div class="col-xs-12">
                                                    <h2 class="accordion-parent">Related Non-Discretionary Budget Detail Category<span class="icon-large-caret pull-right down"></span></h2>
                                                    <fieldset class="accordion-child">
                                                       <apex:actionRegion >
 
                                                        <apex:outputPanel id="Category">
                                                            <apex:pageBlock >
                                                                        <apex:pageBlockTable value="{!ldCategory}" var="item">
                                                                            <apex:column >
                                                                               <apex:outputField value="{!item.Category__c}"/> 
                                                                               <apex:facet name="header">Category</apex:facet>
                                                                            </apex:column>
                                                                             <apex:column >
                                                                               <apex:inputField styleClass="currency-round-off-input" value="{!item.Q1__c}" onchange="df_drdw.globalEvents.roundOffInput(this);"/> 
                                                                               <apex:facet name="header">Q1</apex:facet>
                                                                            </apex:column>
                                                                             <apex:column >
                                                                               <apex:inputField styleClass="currency-round-off-input" value="{!item.Q2__c}" onchange="df_drdw.globalEvents.roundOffInput(this);"/> 
                                                                               <apex:facet name="header">Q2</apex:facet>
                                                                            </apex:column>
                                                                             <apex:column >
                                                                               <apex:inputField styleClass="currency-round-off-input" value="{!item.Q3__c}" onchange="df_drdw.globalEvents.roundOffInput(this);"/> 
                                                                               <apex:facet name="header">Q3</apex:facet>
                                                                            </apex:column>
                                                                             <apex:column >
                                                                               <apex:inputField styleClass="currency-round-off-input" value="{!item.Q4__c}" onchange="df_drdw.globalEvents.roundOffInput(this);"/> 
                                                                               <apex:facet name="header">Q4</apex:facet>
                                                                            </apex:column>
                                                                             <apex:column >
                                                                               <apex:outputText value="{!item.Non_Discretionary_Year_Total__c}"/> 
                                                                               <apex:facet name="header">Non-Discretionary Year Total</apex:facet>
                                                                            </apex:column>
                                                                          </apex:pageBlockTable>
                                                                        
                                                                     
                                                            </apex:pageBlock> 
                                                     </apex:outputpanel>        
                                                     </apex:actionRegion>
                                                     <section class="row submit with-top-margin">
                                                                        <div class="col-xs-12">
                                                                               <apex:CommandButton styleClass="btn button" value="Save" action="{!updateDCategory}" reRender="Category" onclick="df_drdw.globalEvents.showWaitSpinner();" oncomplete="df_drdw.globalEvents.hideWaitSpinner();"/>    
                                                                              
                                                                    <apex:CommandButton styleClass="btn button" immediate="true" value="Reset" action="{!ResetDCategory}" reRender="Category" onclick="df_drdw.globalEvents.showWaitSpinner();" oncomplete="df_drdw.globalEvents.hideWaitSpinner();"/>
                                                                        </div>
                                                                    </section>
                                                    </fieldset>
                                                </div>
                        </section>
                       
                        <!---------------------------------------------------------Buttons Section---------------------------------------------------------------------------------------------->
                            <section class="row submit with-top-margin">
                                <div class="col-xs-12">
                                <apex:outputPanel rendered="{!isAccess}">
                                <!--        <apex:commandButton styleClass="btn button" value="Edit" action="{!Edit}" /> -->
                                </apex:outputPanel>
                                <apex:outputPanel rendered="{!if(OR(isAdmin,isFin),true,false)}">                                   
                                 <!--      <a class="btn button" onClick="df_drdw.createStudy.showDeleteConfirmModal();">Delete</a> -->
                                    </apex:outputPanel>
                                </div>
                            </section>
                            <!---------------------------------------------------------Buttons Section---------------------------------------------------------------------------------------------->
                         <!-- Modal for Delete confirmation start -->
                            <div class="modal fade rejected" id="confirm-delete-modal" tabindex="-1" role="dialog" aria-labelledby="confirmDeleteModalLabel">
                              <div class="modal-dialog modal-lg" role="document">
                                <div class="modal-content">
                                  <div class="modal-header approved">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h1 class="modal-title rejected" id="confirmDeleteModalLabelRejected">Confirm delete</h1>
                                  </div>
                                  <div class="modal-body">
                                    <!-- start -->
                                    <p>Are you sure you want to delete?</p>
                                    <!-- end -->
                                  </div>
                                  <!-- modal-body ends -->a
                                  <div class="modal-footer">
                                    <button type="button" class="btn button cancel-action" data-dismiss="modal">Cancel</button>
                                    <apex:commandLink styleClass="btn button confirm-action" value="Delete" action="{!DeleteRecord}" />
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- Modal for Delete confirmation start -->
                       
                        <!-- Modal for spinner starts -->
                            <div id="loading-results">
                                    <div class="loading-message">
                                        <apex:image value="{!URLFOR($Resource.DRDW_QFOR_R1Style,'assets/img/rolling.gif')}" />
                                    </div>
                            </div>
                            <!-- Modal for spinner ends -->
                       
                        </apex:form>
                       
                       </apex:outputpanel>
                       
                </main>
                </div>
         </div>
         <c:DRDW_SR2_FooterComponent />
		 <c:DRDW_QFOR_Scripts/>
     </body>       

</apex:page>