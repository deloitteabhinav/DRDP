<apex:page sidebar="false" showHeader="false" standardStylesheets="true" id="thePage" Standardcontroller="DRDW_Cap_Request__c" extensions="DRDW_CreateERLRequestCtrl" >
         
    <head>
        <title>Create ERL Request</title>
        <c:DRDW_QFOR_Styles />
    </head>  
    <body>
    <style>
    .datePicker {
        z-index: 9999;
    }
    <!--Intermediate header styles for the demo. To be removed when new header component is in place-->
    .profile-dropdown .profile-menu:hover {
    color: #92d400 !important;
    }
   .profile-dropdown .profile-menu{
    display: inline-block;
    padding: 6px 12px;
    margin-bottom: 0;
    font-size: 14px;
    font-weight: 400;
    line-height: 1.42857143;
    text-align: center;
    white-space: nowrap;
    vertical-align: middle;
    -ms-touch-action: manipulation;
    touch-action: manipulation;
    cursor: pointer;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    background-image: none;
    border: 1px solid transparent;
    border-radius: 4px;
    color: inherit;
    font: inherit;
    margin: 0;
    text-transform: none;
    }
    
    .btn-override{
     color:black !important;
    }
    </style>
        <div class='df_drdw content'>
            <!--Using QFORs Index component for the Top Header -->
            <c:DRDW_IndexNew />
            <div class="df_drdw-createstudy capacity-related-page vertical-compress columns-compressed">
                
                <header>
                    
                    <div class="container">
                        <div class="row">
                            <div class="col-xs-12">
                                <apex:outputpanel rendered="{!IF($CurrentPage.parameters.id == NULL,true,false)}">
                                    <h1>Create ERL Request</h1>
                                    <p></p>
                                </apex:outputpanel> 
                                 <apex:outputpanel rendered="{!IF(($CurrentPage.parameters.id != NULL),true,false)}">
                                    <h1>ERL Request for <apex:outputLink value="{!IF(isIdea=true,'/apex/DRDW_CreateIdea?id='+oRequest.Project__c+'&isEdit=false&section=#Project_Requests',IF(isGen=true,'/apex/DRDW_CreateGeneration?id='+oRequest.Project__c+'&isEdit=false&section=#Project_Requests','/apex/DRDW_CreateAssessment?id='+oRequest.Project__c+'&isEdit=false&section=#Project_Requests'))}">{!projectName}</apex:outputLink> 
                                    </h1>
                                    <p></p>
                                </apex:outputpanel> 
                                                                                            
                            </div>
                        </div>
                    </div>
                    
                </header>
                <main class="container">
                        
                       <apex:outputpanel rendered="{!IF(OR($CurrentPage.parameters.id == NULL,AND($CurrentPage.parameters.id != NULL,$CurrentPage.parameters.isEdit=='true')),true,false)}">
                        <apex:form Styleclass="create-study-form accordion">
                         <!---------------------------------------------------------Buttons Section---------------------------------------------------------------------------------------------->
                           <section class="row submit">
                                <div class="col-xs-12">
                                <input type="button" class="btn button submit-form-button" value="Save"/>
                                    <apex:actionFunction Name="doSubmit" action="{!save}"/>
                                   <!-- <apex:commandButton styleClass="btn button" value="Save" action="{!save}" /> -->
                                     <a class="btn button" onClick="df_drdw.createStudy.showDeleteConfirmModal();">Cancel</a>
                                     
                                  <!--   <apex:outputPanel rendered="{!If(isIdea==true,'true','false')}">
                                        <apex:outputLink styleClass="btn button" value="/apex/DRDW_CreateIdea?id={!projectRecordID}&isEdit=false&section=#Project_Requests" onClick="df_drdw.createStudy.showDeleteConfirmModal();">Cancel</apex:outputLink>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!if(isGen==true,'true','false')}">
                                        <apex:outputLink styleClass="btn button" value="/apex/DRDW_CreateGeneration?id={!projectRecordID }&isEdit=false&section=#Project_Requests" onClick="df_drdw.createStudy.showDeleteConfirmModal();">Cancel</apex:outputLink>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!if(isAssess==true,'true','false')}">
                                        <apex:outputLink styleClass="btn button" value="/apex/DRDW_CreateAssessment?id={!projectRecordID }&isEdit=false&section=#Project_Requests" onClick="df_drdw.createStudy.showDeleteConfirmModal();">Cancel</apex:outputLink>
                                    </apex:outputPanel> -->
                                   
                                   
                                  
                                </div>
                            </section>
                            <!---------------------------------------------------------Buttons Section---------------------------------------------------------------------------------------------->
                              
                             <section class="row">
                             <apex:pageMessages />
                             <apex:outputPanel id="activity">
                                <div class="col-xs-12">
                                    <h2 class="accordion-parent">ERL Request Details
                                    <span class = "mandatory-fields-indicator-badge"/>
                                        <span class="icon-large-caret pull-right down"></span></h2>
                                    <fieldset class="accordion-child">
                                        <div class="row">
                                            <div class="col-xs-3 label-wrapper left-aligned">
                                                <label>{!$ObjectType.DRDW_Cap_Request__c.Fields.Project__c.Label}</label><span class="required-label"> *</span>
                                                <apex:outputpanel rendered="{!IF($ObjectType.DRDW_Cap_Request__c.Fields.Project__c.inlinehelptext != NULL,true,false)}">
                                                    <div class="helpOrb tooltip">
                                                        <span>{!$ObjectType.DRDW_Cap_Request__c.Fields.Project__c.inlinehelptext}</span>
                                                    </div>          
                                                </apex:outputpanel>      
                                            </div>
                                            <div class="col-xs-3 field-wrapper left-aligned">
                                                <apex:outputText value="{!projectName}" styleclass="required"/>
                                            </div>
                                            <div class="col-xs-3 label-wrapper left-aligned">
                                                <label>{!$ObjectType.DRDW_Cap_Request__c.Fields.Status__c.Label}</label>
                                                
                                            </div>
                                            <div class="col-xs-3 field-wrapper left-aligned">
                                                <apex:outputField value="{!oRequest.Status__c}"/>
                                            </div>
                                        </div> 
                                        
                                        <div class="row">
                                            <div class="col-xs-3 label-wrapper left-aligned">
                                                <label>{!$ObjectType.DRDW_Cap_Request__c.Fields.Planned_Start_Date__c.Label}</label><span class="required-label"> *</span>
                                                <apex:outputpanel rendered="{!IF($ObjectType.DRDW_Cap_Request__c.Fields.Planned_Start_Date__c.inlinehelptext != NULL,true,false)}">
                                                    <div class="helpOrb tooltip">
                                                        <span>{!$ObjectType.DRDW_Cap_Request__c.Fields.Planned_Start_Date__c.inlinehelptext}</span>
                                                    </div>          
                                                </apex:outputpanel>
                                            </div>
                                            <div class="col-xs-3 field-wrapper left-aligned">
                                                <apex:inputField value="{!oRequest.Planned_Start_Date__c}"  styleclass="required"/>
                                            </div>
                                            <div class="col-xs-3 label-wrapper left-aligned">
                                                <label>{!$ObjectType.DRDW_Cap_Request__c.Fields.Planned_End_Date__c.Label}</label><span class="required-label"> *</span>
                                                <apex:outputpanel rendered="{!IF($ObjectType.DRDW_Cap_Request__c.Fields.Planned_End_Date__c.inlinehelptext != NULL,true,false)}">
                                                    <div class="helpOrb tooltip">
                                                        <span>{!$ObjectType.DRDW_Cap_Request__c.Fields.Planned_End_Date__c.inlinehelptext}</span>
                                                    </div>          
                                                </apex:outputpanel>      
                                            </div>
                                            <div class="col-xs-3 field-wrapper left-aligned">
                                                <apex:inputField value="{!oRequest.Planned_End_Date__c}" styleclass="required"/>
                                            </div>
                                
                                       </div> 
                                        
                                        <div class="row">
                                            <div class="col-xs-3 label-wrapper left-aligned">
                                                <label>{!$ObjectType.DRDW_Cap_Request__c.Fields.Actual_Start_Date__c.Label}</label>
                                                <apex:outputpanel rendered="{!IF($ObjectType.DRDW_Cap_Request__c.Fields.Actual_Start_Date__c.inlinehelptext != NULL,true,false)}">
                                                    <div class="helpOrb tooltip">
                                                        <span>{!$ObjectType.DRDW_Cap_Request__c.Fields.Actual_Start_Date__c.inlinehelptext}</span>
                                                    </div>          
                                                </apex:outputpanel>
                                            </div>
                                            <div class="col-xs-3 field-wrapper left-aligned">
                                                <apex:inputField value="{!oRequest.Actual_Start_Date__c}" />
                                            </div>
                                            <div class="col-xs-3 label-wrapper left-aligned">
                                                <label>{!$ObjectType.DRDW_Cap_Request__c.Fields.Actual_End_Date__c.Label}</label>
                                                <apex:outputpanel rendered="{!IF($ObjectType.DRDW_Cap_Request__c.Fields.Actual_End_Date__c.inlinehelptext != NULL,true,false)}">
                                                    <div class="helpOrb tooltip">
                                                        <span>{!$ObjectType.DRDW_Cap_Request__c.Fields.Actual_End_Date__c.inlinehelptext}</span>
                                                    </div>          
                                                </apex:outputpanel>      
                                            </div>
                                            <div class="col-xs-3 field-wrapper left-aligned">
                                                <apex:inputField value="{!oRequest.Actual_End_Date__c}" />
                                            </div>
                                           
                                        </div> 
                                        <div class="row">
                                            <div class="col-xs-3 label-wrapper left-aligned">
                                                <label>{!$ObjectType.DRDW_Cap_Request__c.Fields.Do_you_know_your_Activities__c.Label}</label><span class="required-label"> *</span>
                                                <apex:outputpanel rendered="{!IF($ObjectType.DRDW_Cap_Request__c.Fields.Do_you_know_your_Activities__c.inlinehelptext != NULL,true,false)}">
                                                    <div class="helpOrb tooltip">
                                                        <span>{!$ObjectType.DRDW_Cap_Request__c.Fields.Do_you_know_your_Activities__c.inlinehelptext}</span>
                                                    </div>          
                                                </apex:outputpanel>
                                            </div>
                                            <!--<apex:actionFunction action="{!showActivityOrSubmit}" name="activityshowpannel" reRender="activityPannel"/>-->
                                            
                                            <div class="col-xs-3 field-wrapper left-aligned">
                                                <apex:outputPanel rendered="{!IF(OR($CurrentPage.parameters.id == NULL,AND($CurrentPage.parameters.id != NULL,oRequest.Do_you_know_your_Activities__c != 'Yes')),true,false)}">
                                                <apex:inputField value="{!oRequest.Do_you_know_your_Activities__c}" styleclass="required">
                                                <apex:actionSupport action="{!showActivityOrSubmit}" event="onchange" reRender="activityPannel,submitId,activity" oncomplete="df_drdw.globalEvents.fixDatepicker();"/>
                                                </apex:inputField>
                                                 </apex:outputPanel>
                                                 <apex:outputPanel rendered="{!IF(AND($CurrentPage.parameters.id != NULL,oRequest.Do_you_know_your_Activities__c == 'Yes'),true,false)}">
                                                    
                                                        <apex:outputField value="{!oRequest.Do_you_know_your_Activities__c}" styleclass="required">
                                                        
                                                        </apex:outputField>
                                                   
                                            </apex:outputPanel>
                                            </div>

                                          <!--  <div class="col-xs-3">
                                                <apex:commandLink value="Temp save for email" action="{!SendEmailNotifications}"/>
                                          </div> -->
                                            
                                        </div> 
                                        
                                    </fieldset>
                                        </div>
                             
                             
                            <apex:outputPanel id="activityPannel" rendered="{!showActivity}" >
                            
                                    <div class="col-xs-12">
                                            <h2 class="accordion-parent">Activities
                                            <span class="icon-large-caret pull-right down"></span></h2>
                                             
                                            <fieldset class="accordion-child">
                                                     <div class="accordion-content">
                                                 <apex:outputPanel id="capArea" styleClass="contains-erl-activities-table">
                                                 <div class="row">
                                                 <div class="col-xs-12 zero-right-padding">
                                                     <apex:commandLink value="Add Row" action="{!addActivityRow}" reRender="activitylist" styleClass="btn button add-activity-row pull-right" oncomplete="df_drdw.globalEvents.fixDatepicker();"/>
                                                   </div>
                                                   </div>
                                                    <apex:pageBlock id="activitylist">
                                                                <apex:pageMessages />
                                                                <apex:pageBlockTable value="{!lactivityWrapper}" var="WrapperObject">
                                                                    
                                                                    <apex:column >
                                                                        <apex:commandButton value="Save" action="{!saveActivities}" rendered="{!if(WrapperObject.issaved != true,true,false)}" reRender="activitylist" styleClass="button save-button" oncomplete="df_drdw.globalEvents.fixDatepicker();">
                                                                            <!--<apex:param name="MS_Item" value="MS_Item_45382" assignTo="{!index}" />
                                                                            <apex:param name="currentWrapperObject" value="{!WrapperObject}" assignTo="{!currentWrapperObject}" />
                                                                            <apex:param value="True" assignTo="{!WrapperObject.issaved}"/>  -->
                                                                           
                                                                            <apex:param name="indexname" value="{!WrapperObject.index}" assignTo="{!index}"/>
                                                                        </apex:commandButton>
                                                                        
                                                                        <apex:outputPanel rendered="{!IF(OR(isFin,isAdmin,AND(isFuncHead,WrapperObject.isInGroup),AND(isPmErl,WrapperObject.isAccessable),AND(isPmErl,isInBuGroup),AND(isSc,WrapperObject.isAccessable)),true,false)}">
                                                                         <apex:commandButton value="Edit" action="{!EditActivities}" rendered="{!if(WrapperObject.issaved == true,true,false)}" reRender="activitylist" styleClass="button save-button" oncomplete="df_drdw.globalEvents.fixDatepicker();">
                                                                            <apex:param name="indexname" value="{!WrapperObject.index}" assignTo="{!index}"/>
                                                                        </apex:commandButton>
                                                                        </apex:outputPanel>
                                                                    </apex:column>
                                                                    <apex:column >
                                                                        <apex:facet name="header">Title<span class="required-label"> *</span></apex:facet>
                                                                         <apex:outputField value="{!WrapperObject.activityObject.Title__c}"  styleclass="required" rendered="{!WrapperObject.issaved}"/>
                                                                        
                                                                        <apex:inputField value="{!WrapperObject.activityObject.Title__c}"  styleclass="required" rendered="{!if(WrapperObject.issaved != true,true,false)}"/>
                                                                    </apex:column>
                                                                    <apex:column >
                                                                        <apex:facet name="header">Activity Area<span class="required-label"> *</span></apex:facet>
                                                                        <apex:outputField value="{!WrapperObject.activityObject.Capability_Area__c}"  styleclass="required" rendered="{!WrapperObject.issaved}"/>
                                                                        <!--apex:inputField value="{!WrapperObject.activityObject.Capability_Area__c}"  styleclass="required" rendered="{!if(WrapperObject.issaved != true,true,false)}"/-->
                                                                       <apex:selectList id="chooseField" size="1" style="color:Black;" value="{!WrapperObject.activityObject.Capability_Area__c}" styleclass="required" rendered="{!if(WrapperObject.issaved != true,true,false)}">
                                                                            <apex:selectOptions value="{!lAreaPicklist}"/>
                                                                           <apex:actionSupport event="onchange" reRender="capArea" oncomplete="df_drdw.erl_form.clearTextBox()">                                                                              
                                                                           </apex:actionSupport> 
                                                                       </apex:selectList>
                                                                    </apex:column>                                                                    
                                                                    <apex:column >
                                                                        <apex:facet name="header">Activity<span class="required-label"> *</span></apex:facet>
                                                                        <apex:outputField value="{!WrapperObject.activityObject.Capability__c}"  styleclass="required" rendered="{!WrapperObject.issaved}"/>
                                                                        <!--apex:inputField value="{!WrapperObject.activityObject.Capability__c}"  styleclass="required" rendered="{!if(WrapperObject.issaved != true,true,false)}"/-->
                                                                        <apex:variable var="Act" value="{!WrapperObject.activityObject.Capability_Area__c}" />  
                                                                        <apex:outputPanel rendered="{!if(Act <> 'Other',true,false)}">                                                                      
                                                                        <apex:selectList id="chooseField1" size="1" style="color:Black;" value="{!WrapperObject.activityObject.Capability__c}" styleclass="required" rendered="{!if(WrapperObject.issaved != true,true,false)}">
                                                                            <apex:selectOptions value="{!if(Act == Null,mAreaPicklist['Analytical & Assay Development'],mAreaPicklist[Act])}"/>                                                                           
                                                                       </apex:selectList>
                                                                       </apex:outputPanel>
                                                                       <apex:outputPanel rendered="{!if(Act == 'Other',true,false)}">
                                                                             <apex:inputField value="{!WrapperObject.activityObject.Capability__c}"  styleclass="required xyz" rendered="{!if(WrapperObject.issaved != true,true,false)}"/>
                                                                       </apex:outputPanel>
                                                                    </apex:column>
                                                                    
                                                                    <apex:column >
                                                                        <apex:facet name="header">Planned Start Date<span class="required-label"> *</span></apex:facet>
                                                                        <apex:outputField value="{!WrapperObject.activityObject.Planned_Start_Date__c}"  styleclass="required" rendered="{!WrapperObject.issaved}"/>
                                                                        <apex:inputField value="{!WrapperObject.activityObject.Planned_Start_Date__c}"  styleclass="required" rendered="{!if(WrapperObject.issaved != true,true,false)}"/>
                                                                    </apex:column>
                                                                    <apex:column >
                                                                        <apex:facet name="header">Planned End Date<span class="required-label"> *</span></apex:facet>
                                                                        <apex:outputField value="{!WrapperObject.activityObject.Planned_End_Date__c}"  styleclass="required" rendered="{!WrapperObject.issaved}"/>
                                                                        <apex:inputField value="{!WrapperObject.activityObject.Planned_End_Date__c}"  styleclass="required" rendered="{!if(WrapperObject.issaved != true,true,false)}"/>
                                                                    </apex:column>
                                                                    <apex:column >
                                                                        <apex:facet name="header">Actual Start Date</apex:facet>
                                                                        <apex:outputField value="{!WrapperObject.activityObject.Actual_Start_Date__c}"   rendered="{!WrapperObject.issaved}"/>
                                                                        <apex:inputField value="{!WrapperObject.activityObject.Actual_Start_Date__c}"   rendered="{!if(WrapperObject.issaved != true,true,false)}"/>
                                                                    </apex:column>
                                                                    <apex:column >
                                                                        <apex:facet name="header">Actual End Date</apex:facet>
                                                                        <apex:outputField value="{!WrapperObject.activityObject.Actual_End_Date__c}"   rendered="{!WrapperObject.issaved}"/>
                                                                        <apex:inputField value="{!WrapperObject.activityObject.Actual_End_Date__c}"   rendered="{!if(WrapperObject.issaved != true,true,false)}"/>
                                                                    </apex:column>
                                                                    
                                                                    <apex:column >
                                                                        <!--<apex:commandButton value="+" action="{!addActivityRow}" rendered="{!WrapperObject.issaved}" reRender="activitylist">
                                                                        </apex:commandButton>-->
                                                                        <apex:commandButton title="Delete Row" value="-" styleClass="button remove-row-button" action="{!subActivityRow}" rendered="{!lactivityWrapper.size > 1}" reRender="activitylist,cBtn">
                                                                             <apex:param name="indexnamesub" value="{!WrapperObject.index}" assignTo="{!index}"/>
                                                                        </apex:commandButton>
                                                                    </apex:column>
                                                                </apex:pageBlockTable> 
                                                    </apex:pageBlock> 
                                                    </apex:outputPanel>
                                                </div>
                                            </fieldset>
                                        </div>
                                  </apex:outputPanel>
                                  </apex:outputPanel>
                               
                                 </section>
                                
                                 <apex:outputPanel styleClass="row submit with-top-margin">
                                 <section class="row submit with-top-margin">
                                    <div class="col-xs-12">
                                    <input type="button" class="btn button submit-form-button" value="Save"/>
                                        <apex:actionFunction Name="doSubmit" action="{!save}"/>
                                     <!--  <apex:commandButton styleClass="btn button" value="Save" action="{!save}" /> -->
                                         <a class="btn button" onClick="df_drdw.createStudy.showDeleteConfirmModal();">Cancel</a>
                                         
                                   <!--      <apex:outputPanel rendered="{!If(isIdea==true,'true','false')}">
                                        <apex:outputLink styleClass="btn button" value="/apex/DRDW_CreateIdea?id={!projectRecordID}&isEdit=false&section=#Project_Requests">Cancel</apex:outputLink>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!if(isGen==true,'true','false')}">
                                        <apex:outputLink styleClass="btn button" value="/apex/DRDW_CreateGeneration?id={!projectRecordID }&isEdit=false&section=#Project_Requests">Cancel</apex:outputLink>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!if(isAssess==true,'true','false')}">
                                        <apex:outputLink styleClass="btn button" value="/apex/DRDW_CreateAssessment?id={!projectRecordID }&isEdit=false&section=#Project_Requests">Cancel</apex:outputLink>
                                    </apex:outputPanel>
                                   -->
                                    </div>
                                </section>
                                </apex:outputPanel>
                                
                                      <!-- Modal for Delete confirmation start -->
                    <div class="modal fade rejected" id="confirm-delete-modal" tabindex="-1" role="dialog" aria-labelledby="confirmDeleteModalLabel">
                      <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                          <div class="modal-header approved">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h1 class="modal-title rejected" id="confirmDeleteModalLabelRejected">Confirm Cancel</h1>
                          </div>
                          <div class="modal-body">
                            <!-- start -->
                            <p>Are you sure you want to Cancel?</p>
                            <!-- end -->
                          </div>
                          <!-- modal-body ends -->
                          <div class="modal-footer">
                            <button type="button" class="btn button cancel-action" data-dismiss="modal">No</button>
                            <apex:commandLink styleClass="btn button confirm-action" value="Yes" action="{!CancelRecord}" />
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Modal for Delete confirmation start -->
                        
                                
                            </apex:form>
                            </apex:outputpanel>
<!----------------------------------------------------------------------------------View page----------------------------------------------------------------------------------------------------------------------------------------------------------------------->                           
                            <apex:outputPanel rendered="{!IF(AND($CurrentPage.parameters.id != NULL,OR($CurrentPage.parameters.isEdit=='false',$CurrentPage.parameters.isEdit==NULL)),true,false)}"> 
                                      <apex:form Styleclass="create-study-form accordion">
                         <!---------------------------------------------------------Buttons Section---------------------------------------------------------------------------------------------->
                           <section class="row submit">
                                <div class="col-xs-12">
                                    <apex:outputPanel rendered="{!if(OR(isFin,isFuncHead,isAdmin,AND(isPmErl,isParentaccess),AND(isSc,isParentaccess)),true,false)}">
                                    <apex:commandButton styleClass="btn button" value="Edit" action="{!Edit}" />
                                     <apex:outputPanel rendered="{!OR(isAdmin,isFin)}">
                                             <a class="btn button" onClick="df_drdw.createStudy.showDeleteConfirmModal();">Delete</a>
                                        </apex:outputPanel> 
                                     </apex:outputPanel>      
                                </div>
                            </section>
                            <!---------------------------------------------------------Buttons Section---------------------------------------------------------------------------------------------->
                              
                             <section class="row">
                             <apex:outputPanel id="activity" >
                                <div class="col-xs-12">
                                    <h2 class="accordion-parent">ERL Request Details
                                    <span class = "mandatory-fields-indicator-badge"/>
                                        <span class="icon-large-caret pull-right down"></span></h2>
                                    <fieldset class="accordion-child">
                                        <div class="row">
                                            <div class="col-xs-3 label-wrapper left-aligned">
                                                <label>{!$ObjectType.DRDW_Cap_Request__c.Fields.Project__c.Label}</label><span class="required-label"> *</span>
                                                <apex:outputpanel rendered="{!IF($ObjectType.DRDW_Cap_Request__c.Fields.Project__c.inlinehelptext != NULL,true,false)}">
                                                    <div class="helpOrb tooltip">
                                                        <span>{!$ObjectType.DRDW_Cap_Request__c.Fields.Project__c.inlinehelptext}</span>
                                                    </div>          
                                                </apex:outputpanel>      
                                            </div>
                                            <div class="col-xs-3 field-wrapper left-aligned">
                                                <apex:outputText value="{!projectName}" styleclass="required"/>
                                            </div>
                                            <div class="col-xs-3 label-wrapper left-aligned">
                                                <label>{!$ObjectType.DRDW_Cap_Request__c.Fields.Status__c.Label}</label><span class="required-label"> *</span>
                                                
                                            </div>
                                            <div class="col-xs-3 field-wrapper left-aligned">
                                                <apex:outputField value="{!oRequest.Status__c}"  styleclass="required"/>
                                            </div>
                                        </div> 
                                        
                                        <div class="row">
                                            <div class="col-xs-3 label-wrapper left-aligned">
                                                <label>{!$ObjectType.DRDW_Cap_Request__c.Fields.Planned_Start_Date__c.Label}</label><span class="required-label"> *</span>
                                                <apex:outputpanel rendered="{!IF($ObjectType.DRDW_Cap_Request__c.Fields.Planned_Start_Date__c.inlinehelptext != NULL,true,false)}">
                                                    <div class="helpOrb tooltip">
                                                        <span>{!$ObjectType.DRDW_Cap_Request__c.Fields.Planned_Start_Date__c.inlinehelptext}</span>
                                                    </div>          
                                                </apex:outputpanel>
                                            </div>
                                            <div class="col-xs-3 field-wrapper left-aligned">
                                                <apex:outputField value="{!oRequest.Planned_Start_Date__c}"  styleclass="required"/>
                                            </div>
                                            <div class="col-xs-3 label-wrapper left-aligned">
                                                <label>{!$ObjectType.DRDW_Cap_Request__c.Fields.Planned_End_Date__c.Label}</label><span class="required-label"> *</span>
                                                <apex:outputpanel rendered="{!IF($ObjectType.DRDW_Cap_Request__c.Fields.Planned_End_Date__c.inlinehelptext != NULL,true,false)}">
                                                    <div class="helpOrb tooltip">
                                                        <span>{!$ObjectType.DRDW_Cap_Request__c.Fields.Planned_End_Date__c.inlinehelptext}</span>
                                                    </div>          
                                                </apex:outputpanel>      
                                            </div>
                                            <div class="col-xs-3 field-wrapper left-aligned">
                                                <apex:outputField value="{!oRequest.Planned_End_Date__c}" styleclass="required"/>
                                            </div>
                                
                                       </div> 
                                        
                                        <div class="row">
                                            <div class="col-xs-3 label-wrapper left-aligned">
                                                <label>{!$ObjectType.DRDW_Cap_Request__c.Fields.Actual_Start_Date__c.Label}</label>
                                                <apex:outputpanel rendered="{!IF($ObjectType.DRDW_Cap_Request__c.Fields.Actual_Start_Date__c.inlinehelptext != NULL,true,false)}">
                                                    <div class="helpOrb tooltip">
                                                        <span>{!$ObjectType.DRDW_Cap_Request__c.Fields.Actual_Start_Date__c.inlinehelptext}</span>
                                                    </div>          
                                                </apex:outputpanel>
                                            </div>
                                            <div class="col-xs-3 field-wrapper left-aligned">
                                                <apex:outputField value="{!oRequest.Actual_Start_Date__c}" />
                                            </div>
                                            <div class="col-xs-3 label-wrapper left-aligned">
                                                <label>{!$ObjectType.DRDW_Cap_Request__c.Fields.Actual_End_Date__c.Label}</label>
                                                <apex:outputpanel rendered="{!IF($ObjectType.DRDW_Cap_Request__c.Fields.Actual_End_Date__c.inlinehelptext != NULL,true,false)}">
                                                    <div class="helpOrb tooltip">
                                                        <span>{!$ObjectType.DRDW_Cap_Request__c.Fields.Actual_End_Date__c.inlinehelptext}</span>
                                                    </div>          
                                                </apex:outputpanel>      
                                            </div>
                                            <div class="col-xs-3 field-wrapper left-aligned">
                                                <apex:outputField value="{!oRequest.Actual_End_Date__c}" />
                                            </div>
                                           
                                        </div> 
                                        <div class="row">
                                            <div class="col-xs-3 label-wrapper left-aligned">
                                                <label>{!$ObjectType.DRDW_Cap_Request__c.Fields.Do_you_know_your_Activities__c.Label}</label><span class="required-label"> *</span>
                                                <apex:outputpanel rendered="{!IF($ObjectType.DRDW_Cap_Request__c.Fields.Do_you_know_your_Activities__c.inlinehelptext != NULL,true,false)}">
                                                    <div class="helpOrb tooltip">
                                                        <span>{!$ObjectType.DRDW_Cap_Request__c.Fields.Do_you_know_your_Activities__c.inlinehelptext}</span>
                                                    </div>          
                                                </apex:outputpanel>
                                            </div>
                                            <!--<apex:actionFunction action="{!showActivityOrSubmit}" name="activityshowpannel" reRender="activityPannel"/>-->
                                            <div class="col-xs-3 field-wrapper left-aligned">
                                                <apex:outputField value="{!oRequest.Do_you_know_your_Activities__c}" styleclass="required">
                                                <apex:actionSupport action="{!showActivityOrSubmit}" event="onchange" reRender="activityPannel,submitId,activity"/>
                                                </apex:outputField>
                                            </div>
                                            
                                        </div> 
                                        
                                    </fieldset>
                                        </div>
                             
                             
                            <apex:outputPanel id="activityPannel" rendered="{!showActivity}">
                            
                                    <div class="col-xs-12">
                                            <h2 class="accordion-parent">Activities
                                            <span class="icon-large-caret pull-right down"></span></h2>
                                             
                                            <fieldset class="accordion-child">
                                                     <div class="accordion-content">
                                                 <apex:outputPanel id="capArea">
                                                 <div class="row">
                                              <!--   <div class="col-xs-6 zero-right-padding">
                                                     <apex:commandLink value="Add Row" action="{!addActivityRow}" reRender="activitylist"/>
                                                   </div> -->
                                                   </div>
                                                    <apex:pageBlock id="activitylist">
                                                                <apex:pageMessages />
                                                                <apex:pageBlockTable value="{!lRelatedActivity}" var="WrapperObject">
                                                                    <apex:column >
                                                                        <apex:facet name="header">Activity Title<span class="required-label"> *</span></apex:facet>
                                                                       
                                                                        <apex:commandlink styleclass="remove-custom-data-row" value="{!WrapperObject.Title__c}" action="{!ActivityLink}" >
                                                                        <apex:param name="LinkID" value="{!WrapperObject.Id}" assignTo="{!LinkID}" />
                                                                    </apex:commandlink>
                                                                       
                                                                    </apex:column>
                                                                    
                                                                    <apex:column >
                                                                        <apex:facet name="header">Activity Area<span class="required-label"> *</span></apex:facet>
                                                                        <apex:outputField value="{!WrapperObject.Capability_Area__c}"/>
                                                                       
                                                                    </apex:column>                                                                    
                                                                    <apex:column >
                                                                        <apex:facet name="header">Activity<span class="required-label"> *</span></apex:facet>
                                                                        <apex:outputField value="{!WrapperObject.Capability__c}"/>                                                                       
                                                                    </apex:column>
                                                                    
                                                                    <apex:column >
                                                                        <apex:facet name="header">Planned Start Date<span class="required-label"> *</span></apex:facet>
                                                                        <apex:outputField value="{!WrapperObject.Planned_Start_Date__c}"/>
                                                                        
                                                                    </apex:column>
                                                                    <apex:column >
                                                                        <apex:facet name="header">Planned End Date<span class="required-label"> *</span></apex:facet>
                                                                        <apex:outputField value="{!WrapperObject.Planned_End_Date__c}"/>
                                                                        
                                                                    </apex:column>
                                                                    <apex:column >
                                                                        <apex:facet name="header">Actual Start Date</apex:facet>
                                                                        <apex:outputField value="{!WrapperObject.Actual_Start_Date__c}"/>                                                                        
                                                                    </apex:column>
                                                                    <apex:column >
                                                                        <apex:facet name="header">Actual End Date</apex:facet>
                                                                        <apex:outputField value="{!WrapperObject.Actual_End_Date__c}" />                                                                       
                                                                    </apex:column>
                                                                    
                                                                </apex:pageBlockTable> 
                                                    </apex:pageBlock> 
                                                    </apex:outputPanel>
                                                </div>
                                            </fieldset>
                                        </div>
                                 
                                 </apex:outputPanel>
                                 
                                </apex:outputPanel>
                                 </section>
                                
                                 <section class="row submit with-top-margin">
                                    <div class="col-xs-12">
                                       <apex:outputPanel rendered="{!if(OR(isFin,isFuncHead,isAdmin,AND(isPmErl,isParentaccess),AND(isSc,isParentaccess)),true,false)}">
                                       <apex:commandButton styleClass="btn button" value="Edit" action="{!Edit}" /> 
                                       <apex:outputPanel rendered="{!OR(isAdmin,isFin)}">
                                             <a class="btn button" onClick="df_drdw.createStudy.showDeleteConfirmModal();">Delete</a>
                                        </apex:outputPanel>  
                                        </apex:outputPanel>                                    
                                    </div>
                                </section>
                                
                            <!-------------------------------  Buttons Section  ----------------------------------------- -->
                  
                          <!-- Modal for Delete confirmation start -->
                            <div class="modal fade rejected" id="confirm-delete-modal" tabindex="-1" role="dialog" aria-labelledby="confirmDeleteModalLabel">
                              <div class="modal-dialog modal-lg" role="document">
                                <div class="modal-content">
                                  <div class="modal-header approved">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h1 class="modal-title rejected" id="confirmDeleteModalLabelRejected">Confirm delete</h1>
                                  </div>
                                  <div class="modal-body">
                                    <!-- start -->
                                    <p>Are you sure you want to delete?</p>
                                    <!-- end -->
                                  </div>
                                  <!-- modal-body ends -->
                                  <div class="modal-footer">
                                    <button type="button" class="btn button cancel-action" data-dismiss="modal">Cancel</button>
                                    <apex:commandLink styleClass="btn button confirm-action" value="Delete" action="{!DeleteRecord}" />
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- Modal for Delete confirmation start -->
                            <!-- Modal for spinner starts -->
                            <div id="loading-results">
                                    <div class="loading-message">
                                        <apex:image value="{!URLFOR($Resource.DRDW_QFOR_R1Style,'assets/img/rolling.gif')}" />
                                    </div>
                            </div>
 <!-- Modal for spinner ends -->
                                
                            </apex:form>
                            </apex:outputPanel>
                            
                       
                            
                </main>
                </div>
         </div>
         <c:DRDW_SR2_FooterComponent />
         <c:DRDW_QFOR_Scripts />
         <apex:includeScript value="{!URLFOR($Resource.DRDW_QFOR_R1Style,'src/js/erl_form.js')}" />
     </body>  


</apex:page>